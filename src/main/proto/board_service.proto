syntax = "proto3";
option java_multiple_files = true;

import "google/api/annotations.proto";

package com.github.noelyap.setterforcatan.board;

option java_package = "com.github.noelyap.setterforcatan.board.protogen";

import "board.proto";
import "chit.proto";
import "coordinate.proto";
import "marker.proto";
import "tile.proto";

message CoordinateTilesMapping {
  string coordinates_name = 1;
  repeated string tiles_names = 2;
}

message ChitsTilesMapping {
  string chits_name = 1;
  repeated string tiles_names = 2;
}

message Specification {
  repeated Tiles tiles = 1;
  repeated Coordinates coordinates = 2;
  repeated Chits chits = 3;
  repeated CoordinateTilesMapping coordinates_tiles_mappings = 4;
  repeated ChitsTilesMapping chits_tiles_mappings = 5;
  repeated Marker markers = 6;
  // TODO(nyap): configuration_validator = 7;
}

message Schema {
  enum Scenario {
    BASE = 0;
    SEAFARERS__HEADING_FOR_NEW_SHORES = 1;
    SEAFARERS__THE_N_ISLANDS = 2;
    SEAFARERS__OCEANIA = 3;
    SEAFARERS__THROUGH_THE_DESERT = 4;
    SEAFARERS__THE_FORGOTTEN_TRIBE = 5;
    SEAFARERS__CLOTH_FOR_CATAN = 6;
    SEAFARERS__WONDERS_OF_CATAN = 7;
    TRADERS_AND_BARBARIANS__RIVERS_OF_CATAN = 8;
    TRADERS_AND_BARBARIANS__THE_CARAVANS = 9;
    TRADERS_AND_BARBARIANS__BARBARIAN_ATTACK = 10;
    TRADERS_AND_BARBARIANS__TRADERS_AND_BARBARIANS = 11;
  }
  
  int32 player_count = 1;
  bool fishermen_of_catan = 2;
  Scenario scenario = 3;
}

message GenerateBoardRequest {
  oneof arg {
    Schema schema = 1;
    Specification specification = 2;
  }
}

message GenerateBoardResponse {
  Board board = 1;
}

service BoardService {
  rpc generateBoard(GenerateBoardRequest) returns (GenerateBoardResponse);
}
